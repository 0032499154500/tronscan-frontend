webpackJsonp([20],{1849:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,l){try{var o=t[r](l),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}return a("next")})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{account:e.app.account,tokens:e.tokens.tokens,wallet:e.wallet,currentWallet:e.wallet.current}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(7),c=a(s),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(0),m=a(d),p=n(15),h=n(81),g=n(6),b=n(61),y=a(b),E=n(9),v=n(10),x=n(8),k=n(217),w=n(18),A=n(1993),S=(a(A),n(137)),C=n(45),T=a(C),N=n(19),_=n(73),P=n(162),R=n(16),O=n(774),M=n(31),W=a(M),B=n(48),F=a(B),j=function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));X.call(n),n.state={tokens:[],buyAmount:0,loading:!1,total:0,filter:{}};var a=(0,v.trim)((0,k.getQueryParam)(e.location,"search"));return a.length>0&&(n.state.filter.name="%25"+a+"%25"),n}return i(t,e),f(t,[{key:"componentDidMount",value:function(){this.loadPage()}},{key:"componentDidUpdate",value:function(e,t){this.props.location!==e.location&&this.setSearch(),this.state.filter!==t.filter&&(console.log("SEARCH CHANGED!"),this.loadPage())}},{key:"render",value:function(){var e=this,t=this.state,n=t.tokens,a=t.alert,r=t.loading,l=t.total,o=this.props,i=(o.match,o.intl),u=this.customizedColumn(),s=i.formatMessage({id:"view_total"})+" "+l+" "+i.formatMessage({id:"view_pass"});return m.default.createElement("main",{className:"container header-overlap token_black"},a,r&&m.default.createElement("div",{className:"loading-style"},m.default.createElement(R.TronLoader,null)),m.default.createElement("div",{className:"row"},m.default.createElement("div",{className:"col-md-12 table_pos"},l?m.default.createElement("div",{className:"table_pos_info d-none d-md-block",style:{left:"auto"}},s):"",m.default.createElement(T.default,{bordered:!0,loading:r,column:u,data:n,total:l,rowClassName:"table-row",onPageChange:function(t,n){e.loadPage(t,n)}}))))}}]),t}(d.Component),X=function(){var e=this;this.loadPage=function(){var t=r(c.default.mark(function t(){var n,a,r,l,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.filter,a=e.props.intl,e.setState({loading:!0}),r=void 0,!n.name){t.next=10;break}return t.next=7,W.default.get(N.API_URL+"/api/token?sort=-name&limit="+u+"&start="+(i-1)*u+"&status=ico&name="+n.name);case 7:r=t.sent,t.next=13;break;case 10:return t.next=12,W.default.get(N.API_URL+"/api/token?sort=-name&limit="+u+"&start="+(i-1)*u+"&status=ico");case 12:r=t.sent;case 13:return l=r.data.total,o=r.data.data,0===o.length&&S.toastr.warning(a.formatMessage({id:"warning"}),a.formatMessage({id:"record_not_found"})),e.setState({loading:!1,tokens:o,total:l}),t.abrupt("return",l);case 18:case"end":return t.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),this.setSearch=function(){var t=(0,v.trim)((0,k.getQueryParam)(e.props.location,"search"));t.length>0?e.setState({filter:{name:"%25"+t+"%25"}}):e.setState({filter:{}})},this.onChange=function(t,n){e.loadPage(t,n)},this.searchName=function(t){t.length>0?e.setState({filter:{name:"%25"+t+"%25"}}):"#/tokens/view"!==window.location.hash?window.location.hash="#/tokens/view":e.setState({filter:{}})},this.onBuyInputChange=function(t,n,a){var r=e.props.intl;t>a&&(t=a),e.setState({buyAmount:t}),e.buyAmount.value=t;var l=t*(n/N.ONE_TRX);e.priceTRX.innerHTML=r.formatNumber(l)+" TRX"},this.preBuyTokens=function(t){var n=(e.state.buyAmount,e.props);n.currentWallet;if(!n.wallet.isOpen)return void e.setState({alert:m.default.createElement(y.default,{info:!0,showConfirm:!1,style:{marginLeft:"-240px",marginTop:"-195px",width:"450px",height:"300px"}},m.default.createElement("div",{className:"token-sweet-alert"},m.default.createElement("a",{className:"close",onClick:function(){e.setState({alert:null})}},m.default.createElement("i",{className:"fa fa-times",ariaHidden:"true"})),m.default.createElement("span",null,(0,E.tu)("login_first")),m.default.createElement("button",{className:"btn btn-danger btn-block mt-3",onClick:function(){e.setState({alert:null})}},(0,E.tu)("OK"))))});e.setState({alert:m.default.createElement(y.default,{showConfirm:!1,style:{marginLeft:"-240px",marginTop:"-195px",width:"450px",height:"300px"}},m.default.createElement("div",{className:"mt-5 token-sweet-alert",style:{textAlign:"left"}},m.default.createElement("a",{style:{float:"right",marginTop:"-45px"},onClick:function(){e.setState({alert:null})}},m.default.createElement("i",{className:"fa fa-times",ariaHidden:"true"})),m.default.createElement("h5",{style:{color:"black"}},(0,E.tu)("buy_token_info")),0===t.remaining&&m.default.createElement("span",null," ",(0,E.tu)("no_token_to_buy")),m.default.createElement("div",{className:"input-group mt-5"},m.default.createElement("input",{type:"number",ref:function(t){return e.buyAmount=t},className:"form-control",max:t.remaining,min:1,onChange:function(n){e.onBuyInputChange(n.target.value,t.price,t.remaining)}})),m.default.createElement("div",{className:"text-center mt-3 text-muted"},m.default.createElement("b",null,"= ",m.default.createElement("span",{ref:function(t){return e.priceTRX=t}},"0 TRX"))),m.default.createElement("button",{className:"btn btn-danger btn-block mt-3",onClick:function(){e.buyTokens(t)}},(0,E.tu)("participate"))))})},this.buyTokens=function(t){var n=e.state.buyAmount;if(!(n<=0)){var a=e.props,r=a.currentWallet,l=(a.wallet,n*(t.price/N.ONE_TRX));r.balance/N.ONE_TRX<l?e.setState({alert:m.default.createElement(y.default,{warning:!0,showConfirm:!1,style:{marginLeft:"-240px",marginTop:"-195px",width:"450px",height:"300px"}},m.default.createElement("div",{className:"mt-5 token-sweet-alert"},m.default.createElement("a",{style:{float:"right",marginTop:"-155px"},onClick:function(){e.setState({alert:null})}},m.default.createElement("i",{className:"fa fa-times",ariaHidden:"true"})),m.default.createElement("span",null,(0,E.tu)("not_enough_trx_message")),m.default.createElement("button",{className:"btn btn-danger btn-block mt-3",onClick:function(){e.setState({alert:null})}},(0,E.tu)("confirm"))))}):e.setState({alert:m.default.createElement(y.default,{warning:!0,showConfirm:!1,style:{marginLeft:"-240px",marginTop:"-195px",width:"450px",height:"300px"}},m.default.createElement("div",{className:"mt-5 token-sweet-alert"},m.default.createElement("a",{style:{float:"right",marginTop:"-155px"},onClick:function(){e.setState({alert:null})}},m.default.createElement("i",{className:"fa fa-times",ariaHidden:"true"})),m.default.createElement("h5",{style:{color:"black"}},(0,E.tu)("buy_confirm_message_1")),m.default.createElement("span",null,n," ",t.name," ",(0,E.t)("for")," ",n*(t.price/N.ONE_TRX)," TRX?"),m.default.createElement("button",{className:"btn btn-danger btn-block mt-3",onClick:function(){e.confirmTransaction(t)}},(0,E.tu)("confirm"))))})}},this.submit=function(){var t=r(c.default.mark(function t(n){var a,r,l,o,i,u,s,f,d,m,p,h;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.account,l=a.currentWallet,o=e.state,i=o.buyAmount,u=o.privateKey,s=void 0,!F.default.get("islogin")){t.next=21;break}return f=r.tronWeb,t.prev=5,t.next=8,f.transactionBuilder.purchaseToken(n.ownerAddress,n.name,i*n.price,f.defaultAddress.hex);case 8:return d=t.sent,t.next=11,(0,O.transactionResultManager)(d,f);case 11:m=t.sent,p=m.result,s=p,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),console.log(t.t0);case 19:t.next=25;break;case 21:return t.next=23,x.Client.participateAsset(l.address,n.ownerAddress,n.name,i*n.price)(r.key);case 23:h=t.sent,s=h.success;case 25:if(!s){t.next=31;break}return e.setState({activeToken:null,confirmedParticipate:!0,participateSuccess:s,buyAmount:0}),e.props.reloadWallet(),t.abrupt("return",!0);case 31:return t.abrupt("return",!1);case 32:case"end":return t.stop()}},t,e,[[5,16]])}));return function(e){return t.apply(this,arguments)}}(),this.confirmTransaction=function(){var t=r(c.default.mark(function t(n){var a,r,l,o;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,r=a.account,l=a.intl,o=e.state.buyAmount,e.setState({alert:m.default.createElement(y.default,{showConfirm:!1,showCancel:!1,cancelBtnBsStyle:"default",title:l.formatMessage({id:"transferring"}),style:{marginLeft:"-240px",marginTop:"-195px",width:"450px",height:"300px"}})}),t.next=5,e.submit(n);case 5:if(!t.sent){t.next=9;break}e.setState({alert:m.default.createElement(y.default,{success:!0,showConfirm:!1,style:{marginLeft:"-240px",marginTop:"-195px",width:"450px",height:"300px"}},m.default.createElement("div",{className:"mt-5 token-sweet-alert"},m.default.createElement("a",{style:{float:"right",marginTop:"-155px"},onClick:function(){e.setState({alert:null})}},m.default.createElement("i",{className:"fa fa-times",ariaHidden:"true"})),m.default.createElement("h5",{style:{color:"black"}},(0,E.tu)("transaction")," ",(0,E.tu)("confirm")),m.default.createElement("span",null,(0,E.tu)("success_receive")," ",n.name," ",(0,E.tu)("tokens")),m.default.createElement("button",{className:"btn btn-danger btn-block mt-3",onClick:function(){e.setState({alert:null})}},(0,E.tu)("OK"))))}),t.next=10;break;case 9:e.setState({alert:m.default.createElement(y.default,{danger:!0,title:"Error",onConfirm:function(){return e.setState({alert:null})}},(0,E.tu)("fail_transaction"))});case 10:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.customizedColumn=function(){var t=e.props.intl;return[{title:"#",dataIndex:"index",key:"index",align:"center",className:"ant_table _text_nowrap"},{title:(0,v.upperFirst)(t.formatMessage({id:"token"})),dataIndex:"name",key:"name",width:"40%",render:function(e,t,a){return m.default.createElement("div",{className:"table-imgtext"},t.imgUrl?m.default.createElement("div",{style:{width:"42px",height:"42px",marginRight:"18px"}},m.default.createElement("img",{style:{width:"42px",height:"42px"},src:t.imgUrl})):m.default.createElement("div",{style:{width:"42px",height:"42px",marginRight:"18px"}},m.default.createElement("img",{style:{width:"42px",height:"42px"},src:n(1889)})),m.default.createElement("div",null,m.default.createElement("h5",null,m.default.createElement(w.TokenLink,{name:t.name,namePlus:t.name+" ("+t.abbr+")",address:t.ownerAddress})),m.default.createElement("p",null,t.description)))}},{title:t.formatMessage({id:"fund_raised"}),render:function(e,t,n){return m.default.createElement("div",null,m.default.createElement(g.FormattedNumber,{value:t.participated/N.ONE_TRX,maximumFractionDigits:1})," TRX")},align:"center",className:"ant_table d-none d-md-table-cell _text_nowrap"},{title:t.formatMessage({id:"issue_progress"}),dataIndex:"issuedPercentage",key:"issuedPercentage",render:function(e,t,n){return null===e&&(e=0),m.default.createElement("div",null,m.default.createElement(g.FormattedNumber,{value:e,maximumFractionDigits:1}),"%")},align:"center",className:"ant_table d-none d-sm-table-cell _text_nowrap"},{title:t.formatMessage({id:"end_time"}),dataIndex:"endTime",key:"endTime",align:"center",className:"ant_table _text_nowrap",render:function(e,t,n){return m.default.createElement("div",null,m.default.createElement(g.FormattedRelative,{value:t.endTime,units:"day"}))}},{title:t.formatMessage({id:"issuing_price"}),render:function(e,t,n){return m.default.createElement("div",null,m.default.createElement(g.FormattedNumber,{value:t.price/N.ONE_TRX,maximumFractionDigits:6})," TRX")},align:"center",className:"ant_table"},{title:t.formatMessage({id:"participate"}),align:"center",render:function(t,n,a){return n.isBlack?m.default.createElement("button",{className:"btn btn-secondary btn-block btn-sm",disabled:!0},(0,E.tu)("participate")):n.endTime<new Date||100===n.issuedPercentage?m.default.createElement("span",{style:{fontWeight:"normal"}},(0,E.tu)("finish")):n.startTime>new Date?m.default.createElement("span",{style:{fontWeight:"normal"}},(0,E.tu)("not_started")):m.default.createElement("button",{className:"btn btn-default btn-block btn-sm",onClick:function(){return e.preBuyTokens(n)}},(0,E.tu)("participate"))},className:"ant_table"}]}},G={loadTokens:h.loadTokens,login:_.login,reloadWallet:P.reloadWallet};t.default=(0,p.connect)(u,G)((0,g.injectIntl)(j))},1889:function(e,t){e.exports="data:image/png;base64,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"},1993:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(83),u=a(i),s=n(96),c=a(s),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(95),n(76);var d=n(0),m=a(d),p=n(9),h=n(228),g=a(h),b=function(e){function t(e){r(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInputChange=function(e){n.setState({searchText:e.target.value})},n.onReset=function(){n.setState({searchText:""},function(){n.onSearch()})},n.onSearch=function(){var e=n.state.searchText;n.props.search(e)},n.onPressEnter=function(){(0,g.default)("#dropdownMenuButton").dropdown("toggle"),n.onSearch()},n.state={searchText:""},n}return o(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this;(0,g.default)(".dropdown").on("show.bs.dropdown",function(){setTimeout(function(){e.searchInput&&e.searchInput.focus()},100)})}},{key:"render",value:function(){var e=this;return m.default.createElement("span",{className:"dropdown"},m.default.createElement("span",{id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},m.default.createElement("i",{className:"fa fa-filter ml-2"})),m.default.createElement("div",{className:"custom-filter-dropdown dropdown-menu","aria-labelledby":"dropdownMenuButton"},m.default.createElement(c.default,{ref:function(t){return e.searchInput=t},placeholder:"Search name",type:"text",className:"ant-input",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onPressEnter}),m.default.createElement(u.default,{type:"primary",onClick:this.onSearch},(0,p.tu)("search")),m.default.createElement(u.default,{className:"btn-secondary ml-1",onClick:this.onReset},(0,p.tu)("reset"))))}}]),t}(m.default.Component);t.default=b}});
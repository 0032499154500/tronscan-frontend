{"version":3,"sources":["../static/js/TokenOverview.ac5efb41.chunk.js","components/tokens/Overview/index.js","components/common/Fields.js"],"names":["webpackJsonp","1103","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","mapStateToProps","state","tokens","account","app","wallet","current","defineProperty","_regenerator","_regenerator2","_createClass","defineProperties","target","props","i","length","descriptor","protoProps","staticProps","_react","_react2","_reactRedux","_tokens","_reactIntl","_i18n","_api","_constants","_Links","_Avatar","_Avatar2","_reactSticky","_reactBootstrapSweetalert","_reactBootstrapSweetalert2","_Paging","_Paging2","_Fields","TokenOverview","_Component","_this2","_this","getPrototypeOf","getTokenState","token","now","Date","getTime","endTime","issuedPercentage","startTime","buyTokens","amount","tokenCosts","price","ONE_TRX","balance","setState","alert","createElement","warning","title","tu","onConfirm","showCancel","confirmBtnText","confirmBtnBsStyle","cancelBtnText","cancelBtnBsStyle","confirmTransaction","onCancel","name","t","loadPage","_ref","mark","_callee","_ref2","total","compare","page","undefined","pageSize","wrap","_context","prev","next","property","obj1","obj2","loading","Client","getTokens","sort","limit","start","status","sent","stop","onChange","isValid","submit","_ref3","_callee2","isSuccess","_context2","console","log","participateAsset","address","ownerAddress","activeToken","confirmedParticipate","participateSuccess","_x3","success","confirmed","viewMode","filters","active","waiting","confirmVisible","_this3","_state","className","map","index","Fragment","size","TokenLink","description","FormattedNumber","issued","availableSupply","Math","ceil","style","width","FormattedRelative","units","disabled","isLoggedIn","containsToken","NumberField","max","remaining","min","type","onClick","toggleToken","_this4","FormattedDate","FormattedTime","_this5","_state2","match","StickyContainer","Sticky","_ref4","isSticky","url","renderGrid","Component","mapDispatchToProps","loadTokens","connect","injectIntl","1192","_objectWithoutProperties","keys","indexOf","hasOwnProperty","_lodash","_React$Component","_temp","_ret","_len","args","Array","_key","concat","ev","_this$props","_this$props$decimals","decimals","_this$props$min","_this$props$max","number","parseFloat","isNaN","round","onKeyDownCheck","event","String","fromCharCode","which","preventDefault","_props","assign","onKeyDown"],"mappings":"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","file":"static/js/TokenOverview.ac5efb41.chunk.js","sourcesContent":["webpackJsonp([14],{\n\n/***/ 1103:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _regenerator=__webpack_require__(5);var _regenerator2=_interopRequireDefault(_regenerator);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(11);var _tokens=__webpack_require__(89);var _reactIntl=__webpack_require__(14);var _i18n=__webpack_require__(9);var _api=__webpack_require__(10);var _constants=__webpack_require__(36);var _Links=__webpack_require__(18);var _Avatar=__webpack_require__(427);var _Avatar2=_interopRequireDefault(_Avatar);var _reactSticky=__webpack_require__(57);var _reactBootstrapSweetalert=__webpack_require__(88);var _reactBootstrapSweetalert2=_interopRequireDefault(_reactBootstrapSweetalert);var _Paging=__webpack_require__(71);var _Paging2=_interopRequireDefault(_Paging);var _Fields=__webpack_require__(1192);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var TokenOverview=function(_Component){_inherits(TokenOverview,_Component);function TokenOverview(){var _this2=this;_classCallCheck(this,TokenOverview);var _this=_possibleConstructorReturn(this,(TokenOverview.__proto__||Object.getPrototypeOf(TokenOverview)).call(this));_this.getTokenState=function(token){var now=new Date().getTime();if(token.endTime<now||token.issuedPercentage===100){return'finished';}if(token.startTime<now){return'active';}return'waiting';};_this.buyTokens=function(token){var amount=_this.state.amount;var wallet=_this.props.wallet;var tokenCosts=amount*(token.price/_constants.ONE_TRX);if(wallet.balance/_constants.ONE_TRX<tokenCosts){_this.setState({alert:_react2.default.createElement(_reactBootstrapSweetalert2.default,{warning:true,title:(0,_i18n.tu)(\"insufficient_trx\"),onConfirm:function onConfirm(){return _this.setState({alert:null});}},(0,_i18n.tu)(\"not_enouth_trx_message\"))});}else{_this.setState({alert:_react2.default.createElement(_reactBootstrapSweetalert2.default,{info:true,showCancel:true,confirmBtnText:(0,_i18n.tu)(\"confirm_transaction\"),confirmBtnBsStyle:\"success\",cancelBtnText:(0,_i18n.tu)(\"cancel\"),cancelBtnBsStyle:\"default\",title:(0,_i18n.tu)(\"buy_confirm_message_0\"),onConfirm:function onConfirm(){return _this.confirmTransaction(token);},onCancel:function onCancel(){return _this.setState({alert:null});}},(0,_i18n.tu)(\"buy_confirm_message_1\"),_react2.default.createElement(\"br\",null),amount,\" \",token.name,\" \",(0,_i18n.t)(\"for\"),\" \",amount*(token.price/_constants.ONE_TRX),\" TRX?\")});}};_this.loadPage=function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regenerator2.default.mark(function _callee(){var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:40;var _ref2,tokens,total,compare;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:compare=function compare(property){return function(obj1,obj2){if(obj1[property]>obj2[property]){return-1;}else if(obj1[property]<obj2[property]){return 1;}else{return 0;}};};_this.setState({loading:true});_context.next=4;return _api.Client.getTokens({sort:'-name',limit:pageSize,start:(page-1)*pageSize,status:\"ico\"});case 4:_ref2=_context.sent;tokens=_ref2.tokens;total=_ref2.total;tokens=tokens.sort(compare('issuedPercentage'));_this.setState({loading:false,tokens:tokens,total:total});case 9:case\"end\":return _context.stop();}}},_callee,_this2);}));return function(){return _ref.apply(this,arguments);};}();_this.onChange=function(page,pageSize){_this.loadPage(page,pageSize);};_this.isValid=function(){var amount=_this.state.amount;return amount>0;};_this.submit=function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regenerator2.default.mark(function _callee2(token){var account,amount,isSuccess;return _regenerator2.default.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:account=_this.props.account;amount=_this.state.amount;_this.setState({loading:true});console.log(\"participate\",token);_context2.next=6;return _api.Client.participateAsset(account.address,token.ownerAddress,token.name,amount*token.price)(account.key);case 6:isSuccess=_context2.sent;_this.setState({activeToken:null,confirmedParticipate:true,participateSuccess:isSuccess,loading:false});case 8:case\"end\":return _context2.stop();}}},_callee2,_this2);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.confirmTransaction=function(token){_this.setState({alert:_react2.default.createElement(_reactBootstrapSweetalert2.default,{success:true,title:\"Transaction Confirmed\",onConfirm:function onConfirm(){return _this.setState({alert:null});}},\"Successfully received \",token.name,\" tokens\")});_this.submit(token);};_this.state={activeToken:null,alert:null,amount:\"\",confirmed:false,confirmedParticipate:false,participateSuccess:false,loading:false,viewMode:'grid',filters:{active:true,waiting:true},confirmVisible:false,total:0,tokens:[]};return _this;}_createClass(TokenOverview,[{key:\"toggleToken\",value:function toggleToken(token){this.setState({activeToken:token,amount:0,confirmed:false,confirmedParticipate:false,participateSuccess:false,loading:false});}},{key:\"closeToken\",value:function closeToken(){this.setState({activeToken:null,amount:0,confirmed:false,confirmedParticipate:false,participateSuccess:false,loading:false});}},{key:\"containsToken\",value:function containsToken(token){var activeToken=this.state.activeToken;if(!activeToken){return false;}return activeToken.name===token.name;}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadPage();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){//checkPageChanged(this, this.loadPage);\n}},{key:\"renderGrid\",value:function renderGrid(){var _this3=this;var account=this.props.account;var _state=this.state,amount=_state.amount,tokens=_state.tokens;return _react2.default.createElement(\"div\",{className:\"row\"},tokens.map(function(token,index){return _react2.default.createElement(_react.Fragment,{key:index+\"-\"+token.name},_react2.default.createElement(\"div\",{className:\"col-12 col-sm-6 col-lg-4 mb-3\"},_react2.default.createElement(\"div\",{className:\"card token-card h-100\"},_react2.default.createElement(\"div\",{className:\"card-body\"},_react2.default.createElement(\"h5\",{className:\"card-title break-word\"},_react2.default.createElement(_Avatar2.default,{value:token.name,size:25,className:\"float-right\"}),_react2.default.createElement(_Links.TokenLink,{name:token.name})),_react2.default.createElement(\"p\",{className:\"card-text break-word\"},token.description)),_react2.default.createElement(\"ul\",{className:\"list-group list-group-flush\"},_react2.default.createElement(\"li\",{className:\"list-group-item\"},_react2.default.createElement(\"span\",{className:\"text-success\"},_react2.default.createElement(_reactIntl.FormattedNumber,{value:token.issued,className:\"text-success\"}),\"\\xA0\"),\"/\\xA0\",_react2.default.createElement(\"span\",{className:\"text-muted\"},_react2.default.createElement(_reactIntl.FormattedNumber,{value:token.availableSupply})),_react2.default.createElement(\"span\",{className:\"float-right text-success\"},Math.ceil(token.issuedPercentage),\"%\"),_react2.default.createElement(\"div\",{className:\"progress mt-1\"},_react2.default.createElement(\"div\",{className:\"progress-bar bg-success\",style:{width:token.issuedPercentage+'%'}}))),_react2.default.createElement(\"li\",{className:\"list-group-item\"},_this3.getTokenState(token)==='active'&&_react2.default.createElement(\"div\",{className:\"text-center\"},(0,_i18n.tu)(\"ends\"),\"\\xA0\",_react2.default.createElement(_reactIntl.FormattedRelative,{value:token.endTime,units:\"day\"})),_this3.getTokenState(token)==='finished'&&_react2.default.createElement(\"button\",{className:\"btn btn-link btn-block\",disabled:true},(0,_i18n.tu)(\"finished\")),_this3.getTokenState(token)==='waiting'&&_react2.default.createElement(\"div\",{className:\"text-center\"},(0,_i18n.tu)(\"starts\"),\" \",_react2.default.createElement(_reactIntl.FormattedRelative,{value:token.endTime})))),account.isLoggedIn&&_this3.getTokenState(token)==='active'&&(!_this3.containsToken(token)?_react2.default.createElement(\"div\",{className:\"card-footer bg-transparent border-top-0\"},_this3.getTokenState(token)==='finished'?_react2.default.createElement(\"button\",{className:\"btn btn-outline-secondary btn-block\",disabled:true},(0,_i18n.tu)(\"finished\")):_react2.default.createElement(\"button\",{className:\"btn btn-block btn-outline-primary\",onClick:function onClick(){return _this3.toggleToken(token);}},(0,_i18n.tu)(\"participate\"))):_react2.default.createElement(\"div\",{className:\"card-footer bg-transparent border-top-0\"},_react2.default.createElement(\"div\",{className:\"text-muted text-center\"},(0,_i18n.tu)(\"how_much_buy_message\"),_react2.default.createElement(\"br\",null),(0,_i18n.tu)(\"price\"),\": \",token.price/_constants.ONE_TRX,\" TRX\"),_react2.default.createElement(\"div\",{className:\"input-group mt-3\"},_react2.default.createElement(_Fields.NumberField,{className:\"form-control\",value:amount,max:token.remaining,min:1,onChange:function onChange(value){return _this3.setState({amount:value});}}),_react2.default.createElement(\"div\",{className:\"input-group-append\"},_react2.default.createElement(\"button\",{className:\"btn btn-success\",type:\"button\",disabled:!_this3.isValid(),onClick:function onClick(){return _this3.buyTokens(token);}},_react2.default.createElement(\"i\",{className:\"fa fa-check\"})))),_react2.default.createElement(\"div\",{className:\"text-center mt-1 text-muted\"},\"=\\xA0\",_react2.default.createElement(\"b\",null,_react2.default.createElement(_reactIntl.FormattedNumber,{value:amount*(token.price/_constants.ONE_TRX)}),\" TRX\")))))));}));}},{key:\"renderSmallDate\",value:function renderSmallDate(token){var _this4=this;var now=new Date().getTime();if(token.endTime<now){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(\"span\",{className:\"text-muted\"},(0,_i18n.tu)(\"finished\"),\"\\xA0\",_react2.default.createElement(_reactIntl.FormattedDate,{value:token.endTime}),\"\\xA0\",_react2.default.createElement(_reactIntl.FormattedTime,{value:token.endTime})));}if(token.startTime<now){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(\"span\",{className:\"text-muted\"},\"Started\\xA0\",_react2.default.createElement(_reactIntl.FormattedDate,{value:token.startTime}),\"\\xA0\",_react2.default.createElement(_reactIntl.FormattedTime,{value:token.startTime})),!this.containsToken(token)&&_react2.default.createElement(\"button\",{className:\"btn btn-primary btn-sm float-right\",onClick:function onClick(){return _this4.toggleToken(token);}},(0,_i18n.tu)(\"participate\")));}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(\"span\",{className:\"text-muted\"},(0,_i18n.tu)(\"starts\"),\"\\xA0\",_react2.default.createElement(_reactIntl.FormattedDate,{value:token.startTime}),\"\\xA0\",_react2.default.createElement(_reactIntl.FormattedTime,{value:token.startTime})));}},{key:\"render\",value:function render(){var _this5=this;var _state2=this.state,alert=_state2.alert,loading=_state2.loading,total=_state2.total;var match=this.props.match;return _react2.default.createElement(_react.Fragment,null,alert,_react2.default.createElement(_reactSticky.StickyContainer,{className:\"container header-overlap pb-3\"},total>0&&_react2.default.createElement(_reactSticky.Sticky,null,function(_ref4){var style=_ref4.style,isSticky=_ref4.isSticky;return _react2.default.createElement(\"div\",{className:\"row \"+(isSticky?\" bg-white no-gutters p-2 border border-secondary  border-top-0\":\"\")},_react2.default.createElement(\"div\",{className:\"col-sm-12\"},_react2.default.createElement(_Paging2.default,{onChange:_this5.onChange,loading:loading,url:match.url,total:total})));}),_react2.default.createElement(\"div\",{className:\"row mt-3\"},_react2.default.createElement(\"div\",{className:\"col-sm-12\"},this.renderGrid()))));}}]);return TokenOverview;}(_react.Component);function mapStateToProps(state){return{tokens:state.tokens.tokens,account:state.app.account,wallet:state.wallet.current};}var mapDispatchToProps={loadTokens:_tokens.loadTokens};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactIntl.injectIntl)(TokenOverview));\n\n/***/ }),\n\n/***/ 1192:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});exports.NumberField=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(19);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var NumberField=exports.NumberField=function(_React$Component){_inherits(NumberField,_React$Component);function NumberField(){var _ref;var _temp,_this,_ret;_classCallCheck(this,NumberField);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=NumberField.__proto__||Object.getPrototypeOf(NumberField)).call.apply(_ref,[this].concat(args))),_this),_this.onChange=function(ev){var _this$props=_this.props,onChange=_this$props.onChange,_this$props$decimals=_this$props.decimals,decimals=_this$props$decimals===undefined?6:_this$props$decimals,_this$props$min=_this$props.min,min=_this$props$min===undefined?null:_this$props$min,_this$props$max=_this$props.max,max=_this$props$max===undefined?null:_this$props$max;if(onChange){var number=ev.target.value;number=parseFloat(number);if(isNaN(number)){number='';}else{number=(0,_lodash.round)(number,decimals);if(min!==null){number=number>min?number:min;}if(max!==null){number=number>max?max:number;}}onChange(number);}},_this.onKeyDownCheck=function(event){if(String.fromCharCode(event.which)==='E'){event.preventDefault();return false;}},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(NumberField,[{key:\"render\",value:function render(){var _props=this.props,onChange=_props.onChange,props=_objectWithoutProperties(_props,[\"onChange\"]);return _react2.default.createElement(\"input\",Object.assign({type:\"number\",onKeyDown:this.onKeyDownCheck,onChange:this.onChange},props));}}]);return NumberField;}(_react2.default.Component);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/TokenOverview.ac5efb41.chunk.js","import React, {Component, Fragment} from 'react';\nimport {connect} from \"react-redux\";\nimport {loadTokens} from \"../../../actions/tokens\";\nimport {FormattedDate, FormattedNumber, FormattedRelative, FormattedTime, injectIntl} from \"react-intl\";\nimport {tu,t} from \"../../../utils/i18n\";\nimport {Client} from \"../../../services/api\";\nimport {ONE_TRX} from \"../../../constants\";\nimport {TokenLink} from \"../../common/Links\";\nimport Avatar from \"../../common/Avatar\";\nimport {Sticky, StickyContainer} from \"react-sticky\";\nimport SweetAlert from \"react-bootstrap-sweetalert\";\nimport Paging from \"../../common/Paging\";\nimport {NumberField} from \"../../common/Fields\";\n\nclass TokenOverview extends Component {\n\n  constructor() {\n    super();\n\n    this.state = {\n      activeToken: null,\n      alert: null,\n      amount: \"\",\n      confirmed: false,\n      confirmedParticipate: false,\n      participateSuccess: false,\n      loading: false,\n      viewMode: 'grid',\n      filters: {\n        active: true,\n         waiting: true,\n      },\n      confirmVisible: false,\n      total: 0,\n      tokens: [],\n    };\n  }\n\n  toggleToken(token) {\n    this.setState({\n      activeToken: token,\n      amount: 0,\n      confirmed: false,\n      confirmedParticipate: false,\n      participateSuccess: false,\n      loading: false,\n    })\n  }\n\n  closeToken() {\n    this.setState({\n      activeToken: null,\n      amount: 0,\n      confirmed: false,\n      confirmedParticipate: false,\n      participateSuccess: false,\n      loading: false,\n    })\n  }\n\n  getTokenState = (token) => {\n    let now = new Date().getTime();\n\n    if (token.endTime < now || token.issuedPercentage === 100) {\n      return 'finished';\n    }\n\n    if (token.startTime < now) {\n      return 'active';\n    }\n\n    return 'waiting';\n  };\n\n  buyTokens = (token) => {\n    let {amount} = this.state;\n    let {wallet} = this.props;\n\n    let tokenCosts = amount * (token.price / ONE_TRX);\n\n    if (( wallet.balance / ONE_TRX) < tokenCosts) {\n      this.setState({\n        alert: (\n          <SweetAlert\n            warning\n            title={tu(\"insufficient_trx\")}\n            onConfirm={() => this.setState({ alert: null })}\n          >\n            {tu(\"not_enouth_trx_message\")}\n          </SweetAlert>\n        ),\n      });\n    } else {\n      this.setState({\n        alert: (\n          <SweetAlert\n            info\n            showCancel\n            confirmBtnText={tu(\"confirm_transaction\")}\n            confirmBtnBsStyle=\"success\"\n            cancelBtnText={tu(\"cancel\")}\n            cancelBtnBsStyle=\"default\"\n            title={tu(\"buy_confirm_message_0\")}\n            onConfirm={() => this.confirmTransaction(token)}\n            onCancel={() => this.setState({ alert: null })}\n          >\n            {tu(\"buy_confirm_message_1\")}<br/>\n            {amount} {token.name} {t(\"for\")} {amount * (token.price / ONE_TRX)} TRX?\n          </SweetAlert>\n        ),\n      });\n    }\n  };\n\n  containsToken(token) {\n    let {activeToken} = this.state;\n\n    if (!activeToken) {\n      return false;\n    }\n\n    return activeToken.name === token.name;\n  }\n\n  loadPage = async (page = 1,pageSize=40) => {\n\n    this.setState({ loading: true });\n\n    let {tokens, total} = await Client.getTokens({\n      sort: '-name',\n      limit: pageSize,\n      start: (page-1) * pageSize,\n      status: \"ico\",\n    });\n\n    function compare(property) {\n      return function (obj1, obj2) {\n\n        if (obj1[property] > obj2[property]) {\n          return -1;\n        } else if (obj1[property] < obj2[property] ) {\n          return 1;\n        } else {\n          return 0;\n        }\n\n      }\n    }\n    tokens=tokens.sort(compare('issuedPercentage'));\n    this.setState({\n      loading: false,\n      tokens,\n      total,\n    });\n  };\n\n  componentDidMount() {\n    this.loadPage();\n  }\n\n  componentDidUpdate() {\n    //checkPageChanged(this, this.loadPage);\n  }\n  onChange = (page,pageSize) => {\n    this.loadPage(page,pageSize);\n  };\n\n  isValid = () => {\n    let {amount} = this.state;\n    return (amount > 0);\n  };\n\n  submit = async (token) => {\n\n    let {account} = this.props;\n    let {amount} = this.state;\n\n    this.setState({ loading: true });\n\n    console.log(\"participate\", token);\n\n    let isSuccess = await Client.participateAsset(\n      account.address,\n      token.ownerAddress,\n      token.name,\n      amount * token.price)(account.key);\n\n    this.setState({\n      activeToken: null,\n      confirmedParticipate: true,\n      participateSuccess: isSuccess,\n      loading: false,\n    });\n  };\n\n  renderGrid() {\n    let {account} = this.props;\n    let {amount, tokens} = this.state;\n\n    return (\n      <div className=\"row\">\n        {\n          tokens.map((token, index) => (\n            <Fragment key={index + \"-\" + token.name}>\n              <div className=\"col-12 col-sm-6 col-lg-4 mb-3\">\n                <div className=\"card token-card h-100\">\n                  <div className=\"card-body\">\n                    <h5 className=\"card-title break-word\">\n                      <Avatar value={token.name} size={25} className=\"float-right\"/>\n                      <TokenLink name={token.name}/>\n                    </h5>\n                    <p className=\"card-text break-word\">\n                      {token.description}\n                    </p>\n                    {/*<p className=\"mb-0\">*/}\n                      {/*<ExternalLink url={token.url} className=\"card-link text-primary text-center\">*/}\n                        {/*Visit Website*/}\n                      {/*</ExternalLink>*/}\n                    {/*</p>*/}\n                  </div>\n                  <ul className=\"list-group list-group-flush\">\n                    <li className=\"list-group-item\">\n                      <span className=\"text-success\">\n                        <FormattedNumber value={token.issued} className=\"text-success\"/>&nbsp;\n                      </span>\n                      /&nbsp;\n                      <span className=\"text-muted\">\n                        <FormattedNumber value={token.availableSupply}/>\n                      </span>\n                      <span className=\"float-right text-success\">\n                        {Math.ceil(token.issuedPercentage)}%\n                      </span>\n                      <div className=\"progress mt-1\">\n                        <div className=\"progress-bar bg-success\" style={{width: token.issuedPercentage + '%'}}/>\n                      </div>\n                    </li>\n                    <li className=\"list-group-item\">\n                      {\n                        this.getTokenState(token) === 'active' &&\n                        <div className=\"text-center\">\n                          {tu(\"ends\")}&nbsp;\n                          <FormattedRelative value={token.endTime} units=\"day\"/>\n                        </div>\n                      }\n                      {\n                        this.getTokenState(token) === 'finished' &&\n                        <button className=\"btn btn-link btn-block\" disabled={true}>\n                          {tu(\"finished\")}\n                        </button>\n                      }\n                      {\n                        this.getTokenState(token) === 'waiting' &&\n                        <div className=\"text-center\">\n                          {tu(\"starts\")} <FormattedRelative value={token.endTime}/>\n                        </div>\n                      }\n                    </li>\n                  </ul>\n                  {\n                    (account.isLoggedIn && this.getTokenState(token) === 'active') && (\n                      !this.containsToken(token) ?\n                        <div className=\"card-footer bg-transparent border-top-0\">\n                          {\n                            this.getTokenState(token) === 'finished' ?\n                              <button className=\"btn btn-outline-secondary btn-block\" disabled={true}>\n                                {tu(\"finished\")}\n                              </button> :\n                              <button className=\"btn btn-block btn-outline-primary\"\n                                      onClick={() => this.toggleToken(token)}>\n                                {tu(\"participate\")}\n                              </button>\n                          }\n                        </div> :\n                        <div className=\"card-footer bg-transparent border-top-0\">\n                          <div className=\"text-muted text-center\">\n                            {tu(\"how_much_buy_message\")}<br/>\n                            {tu(\"price\")}: {(token.price / ONE_TRX)} TRX\n                          </div>\n                          <div className=\"input-group mt-3\">\n                            <NumberField\n                              className=\"form-control\"\n                              value={amount}\n                              max={token.remaining}\n                              min={1}\n                              onChange={value => this.setState({ amount: value })}\n                            />\n                            <div className=\"input-group-append\">\n                              <button className=\"btn btn-success\"\n                                      type=\"button\"\n                                      disabled={!this.isValid()}\n                                      onClick={() => this.buyTokens(token)}>\n                                <i className=\"fa fa-check\"/>\n                              </button>\n                            </div>\n                          </div>\n                          <div className=\"text-center mt-1 text-muted\">\n                            {/*<FormattedNumber value={amount} /> {token.name}<br/>*/}\n                            =&nbsp;\n                            <b><FormattedNumber value={amount * (token.price / ONE_TRX)}/> TRX</b>\n                          </div>\n                        </div>\n                    )\n                  }\n                </div>\n              </div>\n            </Fragment>\n          ))\n        }\n\n      </div>\n    );\n  }\n\n  renderSmallDate(token) {\n\n    let now = new Date().getTime();\n\n    if (token.endTime < now) {\n      return (\n        <Fragment>\n          <span className=\"text-muted\">\n            {tu(\"finished\")}&nbsp;\n            <FormattedDate value={token.endTime}/>&nbsp;\n            <FormattedTime value={token.endTime}/>\n          </span>\n        </Fragment>\n      );\n    }\n\n    if (token.startTime < now) {\n      return (\n        <Fragment>\n          <span className=\"text-muted\">\n            Started&nbsp;\n            <FormattedDate value={token.startTime}/>&nbsp;\n            <FormattedTime value={token.startTime}/>\n          </span>\n          {\n            !this.containsToken(token) && <button\n              className=\"btn btn-primary btn-sm float-right\"\n              onClick={() => this.toggleToken(token)}>\n              {tu(\"participate\")}\n            </button>\n          }\n\n        </Fragment>\n      )\n    }\n\n    return (\n      <Fragment>\n          <span className=\"text-muted\">\n            {tu(\"starts\")}&nbsp;\n            <FormattedDate value={token.startTime}/>&nbsp;\n            <FormattedTime value={token.startTime}/>\n          </span>\n      </Fragment>\n    );\n  }\n\n  confirmTransaction = (token) => {\n    this.setState({\n      alert: (\n        <SweetAlert success title=\"Transaction Confirmed\" onConfirm={() => this.setState({ alert: null })}>\n          Successfully received {token.name} tokens\n        </SweetAlert>\n      )\n    });\n    this.submit(token);\n  };\n\n  render() {\n\n    let {alert, loading, total} = this.state;\n    let {match} = this.props;\n\n    return (\n      <Fragment>\n        {alert}\n          <StickyContainer className=\"container header-overlap pb-3\">\n            {\n              total > 0 &&\n              <Sticky>\n                {\n                  ({style, isSticky}) => (\n                      <div\n                          className={\"row \" + (isSticky ? \" bg-white no-gutters p-2 border border-secondary  border-top-0\" : \"\")}>\n                        <div className=\"col-sm-12\">\n                          <Paging onChange={this.onChange} loading={loading} url={match.url} total={total}/>\n                        </div>\n                      </div>\n                  )\n                }\n              </Sticky>\n            }\n            <div className=\"row mt-3\">\n              <div className=\"col-sm-12\">\n                {this.renderGrid()}\n              </div>\n            </div>\n          </StickyContainer>\n      </Fragment>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    tokens: state.tokens.tokens,\n    account: state.app.account,\n    wallet: state.wallet.current,\n  };\n}\n\nconst mapDispatchToProps = {\n  loadTokens,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(injectIntl(TokenOverview));\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/tokens/Overview/index.js","import React from \"react\";\nimport {round} from \"lodash\";\n\nexport class NumberField extends React.Component {\n\n  onChange = (ev) => {\n    let {onChange, decimals = 6, min = null, max = null} = this.props;\n    if (onChange) {\n      let number = ev.target.value;\n      number = parseFloat(number);\n      if (isNaN(number)) {\n        number = '';\n      } else {\n        number = round(number, decimals);\n        if (min !== null) {\n          number = number > min ? number : min;\n        }\n        if (max !== null) {\n          number = number > max ? max : number;\n        }\n      }\n      onChange(number);\n    }\n\n  };\n  onKeyDownCheck = (event) => {\n    if (String.fromCharCode(event.which)==='E') {\n      event.preventDefault();\n      return false;\n    }\n  }\n  render() {\n\n    let {onChange, ...props} = this.props;\n\n    return (\n      <input type=\"number\" onKeyDown={this.onKeyDownCheck} onChange={this.onChange} {...props} />\n    )\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/Fields.js"],"sourceRoot":""}
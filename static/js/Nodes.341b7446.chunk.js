webpackJsonp([8],{1107:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var l=t[r](o),c=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}return a("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=a(i),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(0),m=a(f),p=n(11),y=n(421),h=n(19),v=n(10),b=n(30),E=n(1865),N=n(226),_=n(7),g=n(1146),w=n(1879),O=a(w),x=function(e){function t(e){var n=this;o(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.buildNodeList=function(){var e=a.state.nodes,t={},n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value;t[u.country]||(t[u.country]={name:u.country,nodes:[],total:0}),t[u.country].nodes.push(u),t[u.country].total++}}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}var i=Object.values(t);return i=(0,h.sortBy)(i,function(e){return e.total}),i=(0,h.filter)(i,function(e){return""!==e.name}),i.reverse(),i},a.setCountryHover=function(e){a.setState({activeCountry:e})},a.loadNodes=r(s.default.mark(function e(){var t,r,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.Client.getNodeLocations();case 2:t=e.sent,r=t.nodes,o=t.status,a.setState({nodes:r,syncStatus:o});case 6:case"end":return e.stop()}},e,n)})),a.state={showAllCountries:!1,size:5,nodes:[],syncStatus:"waiting",show3D:"3d"===(0,N.getQueryParam)(e.location,"mode")},a}return c(t,e),d(t,[{key:"renderList",value:function(){var e=this.state,t=e.showAllCountries,n=e.size,a=this.state.nodes,r=this.buildNodeList();return t||(r=r.slice(0,n)),0===a.length?m.default.createElement("div",{className:"d-flex justify-content-center p-4"},m.default.createElement(b.TronLoader,null)):m.default.createElement("ul",{className:"list-group list-group-flush"},r.map(function(e,t){return m.default.createElement("li",{key:e.name,className:"list-group-item d-flex"},e.name,m.default.createElement("span",{className:"ml-auto"},e.total))}))}},{key:"componentDidMount",value:function(){this.loadNodes()}},{key:"render",value:function(){var e=this.state,t=e.nodes,n=e.syncStatus,a=this.buildNodeList();return"waiting_for_first_sync"===n?m.default.createElement("main",{className:"container header-overlap"},m.default.createElement("div",{className:"card"},m.default.createElement(b.TronLoader,null,(0,v.tu)("first_node_sync_message")))):0===t.length?m.default.createElement("main",{className:"container header-overlap"},m.default.createElement("div",{className:"card"},m.default.createElement(b.TronLoader,null,(0,v.tu)("loading_nodes")))):m.default.createElement("main",{className:"container header-overlap"},m.default.createElement("div",{className:"row"},m.default.createElement("div",{className:"col-md-6"},m.default.createElement("div",{className:"card h-100 text-center widget-icon"},m.default.createElement(g.WidgetIcon,{className:"fa fa-server"}),m.default.createElement("div",{className:"card-body"},m.default.createElement("h3",{className:"text-secondary"},t.length),(0,v.tu)("nodes")))),m.default.createElement("div",{className:"col-md-6 mt-3 mt-md-0"},m.default.createElement("div",{className:"card h-100 text-center widget-icon"},m.default.createElement(g.WidgetIcon,{className:"fa fa-globe text-primary"}),m.default.createElement("div",{className:"card-body"},a.length>0?m.default.createElement("h3",{className:"text-primary"},(0,h.maxBy)(a,function(e){return e.total}).name):m.default.createElement("h3",{className:"text-primary"},"Unknown"),(0,v.tu)("most_nodes"))))),m.default.createElement("div",{className:"row mt-3"},m.default.createElement("div",{className:"col-md-12"},m.default.createElement("div",{className:"card"},m.default.createElement(E.NodeMapAsync,{nodes:t,countries:a})))),m.default.createElement("div",{className:"row mt-3"},m.default.createElement("div",{className:"col-md-12"},m.default.createElement("div",{className:"card"},m.default.createElement("div",{className:"card-body"},m.default.createElement("h5",{className:"card-title text-center"}," ",(0,v.tu)("nodes_ranking")),m.default.createElement("div",{style:{height:500}},null===a?m.default.createElement(b.TronLoader,null):m.default.createElement(O.default,{style:{height:500},data:a})))))))}}]),t}(f.Component),j={loadNodes:y.loadNodes};t.default=(0,p.connect)(u,j)(x)},1146:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e){var t=e.className,n=a(e,["className"]);return l.default.createElement("span",Object.assign({className:"icon-big"},n),l.default.createElement("i",{className:" fa-10x "+t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetIcon=r;var o=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(o)},1865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeMapAsync=void 0;var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(419),l=n(30),c=n(10),u=n(424);t.NodeMapAsync=(0,o.asyncComponent)({LoadingComponent:function(){return r.default.createElement("div",{className:"card"},r.default.createElement(l.TronLoader,null,(0,c.tu)("loading_map")))},resolve:function(){return new Promise(function(e){return n.e(24).then(function(t){u("",function(){e(n(1866))})}.bind(null,n)).catch(n.oe)})}})},1879:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){return{}}Object.defineProperty(t,"__esModule",{value:!0}),t.BarReact=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),s=a(i),d=n(14),f=n(222),m=a(f),p=n(6),y=a(p);n(440),n(223),n(224);var h=n(11),v=t.BarReact=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=("_"+Math.random()).replace(".","_");return n.state={barId:"bar"+a},n}return l(t,e),u(t,[{key:"initBar",value:function(e){var t=this.props,n=(t.intl,t.data),a=y.default.getInstanceByDom(document.getElementById(e));void 0===a&&(a=y.default.init(document.getElementById(e))),m.default.barChart.title.text="",m.default.barChart.yAxis.data=[],m.default.barChart.series[0].data=[],m.default.barChart.series[0].itemStyle={normal:{color:new y.default.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#ed213a"},{offset:1,color:"#93291e"}])},emphasis:{color:new y.default.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#0052d4"},{offset:1,color:"#0052d4"}])}},n&&n.length>0&&n.map(function(e){m.default.barChart.yAxis.data.push(e.name),m.default.barChart.series[0].data.push(e.total)}),n&&0===n.length&&(m.default.barChart.title.text="No data"),a.setOption(m.default.barChart)}},{key:"componentDidMount",value:function(){this.initBar(this.state.barId)}},{key:"componentDidUpdate",value:function(){this.initBar(this.state.barId)}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement("div",{id:this.state.barId,style:this.props.style}))}}]),t}(s.default.Component),b={};t.default=(0,h.connect)(c,b,null,{pure:!1})((0,d.injectIntl)(v))}});
//# sourceMappingURL=Nodes.341b7446.chunk.js.map
webpackJsonp([12],{1107:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,o){try{var l=t[r](o),c=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),s=n(i),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),m=n(f),p=a(58),y=n(p),h=a(11),v=a(423),b=a(18),E=a(10),N=a(26),_=a(1866),g=a(225),w=(a(7),a(1149)),O=a(1880),x=n(O),j=function(e){function t(e){var a=this;o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildNodeList=function(){var e=n.state.nodes,t={},a=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;t[u.country]||(t[u.country]={name:u.country,nodes:[],total:0}),t[u.country].nodes.push(u),t[u.country].total++}}catch(e){r=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw o}}var i=Object.values(t);return i=(0,b.sortBy)(i,function(e){return e.total}),i=(0,b.filter)(i,function(e){return""!==e.name}),i.reverse(),i},n.setCountryHover=function(e){n.setState({activeCountry:e})},n.loadNodes=r(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.get("https://tron.network/api/v2/node/nodemap");case 2:t=e.sent,r=t.data,n.setState({nodes:r.data,syncStatus:null});case 5:case"end":return e.stop()}},e,a)})),n.state={showAllCountries:!1,size:5,nodes:[],syncStatus:"waiting",show3D:"3d"===(0,g.getQueryParam)(e.location,"mode")},n}return c(t,e),d(t,[{key:"renderList",value:function(){var e=this.state,t=e.showAllCountries,a=e.size,n=this.state.nodes,r=this.buildNodeList();return t||(r=r.slice(0,a)),0===n.length?m.default.createElement("div",{className:"d-flex justify-content-center p-4"},m.default.createElement(N.TronLoader,null)):m.default.createElement("ul",{className:"list-group list-group-flush"},r.map(function(e,t){return m.default.createElement("li",{key:e.name,className:"list-group-item d-flex"},e.name,m.default.createElement("span",{className:"ml-auto"},e.total))}))}},{key:"componentDidMount",value:function(){this.loadNodes()}},{key:"render",value:function(){var e=this.state,t=e.nodes,a=e.syncStatus,n=this.buildNodeList();return"waiting_for_first_sync"===a?m.default.createElement("main",{className:"container header-overlap"},m.default.createElement("div",{className:"card"},m.default.createElement(N.TronLoader,null,(0,E.tu)("first_node_sync_message")))):0===t.length?m.default.createElement("main",{className:"container header-overlap"},m.default.createElement("div",{className:"card"},m.default.createElement(N.TronLoader,null,(0,E.tu)("loading_nodes")))):m.default.createElement("main",{className:"container header-overlap"},m.default.createElement("div",{className:"row"},m.default.createElement("div",{className:"col-md-6"},m.default.createElement("div",{className:"card h-100 text-center widget-icon"},m.default.createElement(w.WidgetIcon,{className:"fa fa-server"}),m.default.createElement("div",{className:"card-body"},m.default.createElement("h3",{className:"text-secondary"},t.length),(0,E.tu)("nodes")))),m.default.createElement("div",{className:"col-md-6 mt-3 mt-md-0"},m.default.createElement("div",{className:"card h-100 text-center widget-icon"},m.default.createElement(w.WidgetIcon,{className:"fa fa-globe text-primary"}),m.default.createElement("div",{className:"card-body"},n.length>0?m.default.createElement("h3",{className:"text-primary"},(0,b.maxBy)(n,function(e){return e.total}).name):m.default.createElement("h3",{className:"text-primary"},"Unknown"),(0,E.tu)("most_nodes"))))),m.default.createElement("div",{className:"row mt-3"},m.default.createElement("div",{className:"col-md-12"},m.default.createElement("div",{className:"card"},m.default.createElement(_.NodeMapAsync,{nodes:t,countries:n})))),m.default.createElement("div",{className:"row mt-3"},m.default.createElement("div",{className:"col-md-12"},m.default.createElement("div",{className:"card"},m.default.createElement("div",{className:"card-body"},m.default.createElement("h5",{className:"card-title text-center"}," ",(0,E.tu)("nodes_ranking")),m.default.createElement("div",{style:{height:500}},null===n?m.default.createElement(N.TronLoader,null):m.default.createElement(x.default,{style:{height:500},data:n})))))))}}]),t}(f.Component),C={loadNodes:v.loadNodes};t.default=(0,h.connect)(u,C)(j)},1149:function(e,t,a){"use strict";function n(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e){var t=e.className,a=n(e,["className"]);return l.default.createElement("span",Object.assign({className:"icon-big"},a),l.default.createElement("i",{className:" fa-7x "+t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetIcon=r;var o=a(0),l=function(e){return e&&e.__esModule?e:{default:e}}(o)},1866:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeMapAsync=void 0;var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(421),l=a(26),c=a(10),u=a(426);t.NodeMapAsync=(0,o.asyncComponent)({LoadingComponent:function(){return r.default.createElement("div",{className:"card"},r.default.createElement(l.TronLoader,null,(0,c.tu)("loading_map")))},resolve:function(){return new Promise(function(e){return a.e(24).then(function(t){u("",function(){e(a(1867))})}.bind(null,a)).catch(a.oe)})}})},1880:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){return{}}Object.defineProperty(t,"__esModule",{value:!0}),t.BarReact=void 0;var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),s=n(i),d=a(14),f=a(222),m=n(f),p=a(6),y=n(p);a(440),a(223),a(224);var h=a(11),v=t.BarReact=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=("_"+Math.random()).replace(".","_");return a.state={barId:"bar"+n},a}return l(t,e),u(t,[{key:"initBar",value:function(e){var t=this.props,a=(t.intl,t.data),n=y.default.getInstanceByDom(document.getElementById(e));void 0===n&&(n=y.default.init(document.getElementById(e))),m.default.barChart.title.text="",m.default.barChart.yAxis.data=[],m.default.barChart.series[0].data=[],m.default.barChart.series[0].itemStyle={normal:{color:new y.default.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#ed213a"},{offset:1,color:"#93291e"}])},emphasis:{color:new y.default.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#0052d4"},{offset:1,color:"#0052d4"}])}},a&&a.length>0&&a.map(function(e){m.default.barChart.yAxis.data.push(e.name),m.default.barChart.series[0].data.push(e.total)}),a&&0===a.length&&(m.default.barChart.title.text="No data"),n.setOption(m.default.barChart)}},{key:"componentDidMount",value:function(){this.initBar(this.state.barId)}},{key:"componentDidUpdate",value:function(){this.initBar(this.state.barId)}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement("div",{id:this.state.barId,style:this.props.style}))}}]),t}(s.default.Component),b={};t.default=(0,h.connect)(c,b,null,{pure:!1})((0,d.injectIntl)(v))}});
//# sourceMappingURL=Nodes.1d65a108.chunk.js.map
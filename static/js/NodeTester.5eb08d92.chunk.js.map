{"version":3,"sources":["../static/js/NodeTester.5eb08d92.chunk.js","components/tools/NodeTester/index.js"],"names":["webpackJsonp","1097","module","exports","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_extends","assign","target","arguments","source","key","hasOwnProperty","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_react","_react2","obj","__esModule","default","_lodash","_api","_i18n","NodeTester","_Component","this","_this","getPrototypeOf","hideModal","setState","modal","isValid","ip","port","isValidIp","test","isValidPort","isNaN","parseInt","stopListening","listener","close","active","logs","testNode","channel","query","on","status","state","id","concat","slice","setPort","ev","trim","prevProps","prevState","_this2","_state","createElement","className","tu","type","placeholder","onChange","onClick","disabled","align","style","width","map","log","msg","responseTime","Component"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAASC,GAEjC,YAC6hC,SAASC,GAAmBC,GAAK,GAAGC,MAAMC,QAAQF,GAAK,CAAC,IAAI,GAAIG,GAAE,EAAEC,EAAKH,MAAMD,EAAIK,QAAQF,EAAEH,EAAIK,OAAOF,IAAKC,EAAKD,GAAGH,EAAIG,EAAI,OAAOC,GAAW,MAAOH,OAAMK,KAAKN,GAAO,QAASO,GAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCAAuC,QAASC,GAA2BC,EAAKC,GAAM,IAAID,EAAM,KAAM,IAAIE,gBAAe,4DAA8D,QAAOD,GAAqB,iBAAPA,IAA+B,mBAAPA,GAAwBD,EAALC,EAAW,QAASE,GAAUC,EAASC,GAAY,GAAuB,mBAAbA,IAAsC,OAAbA,EAAmB,KAAM,IAAIP,WAAU,iEAAkEO,GAAaD,GAASE,UAAUC,OAAOC,OAAOH,GAAYA,EAAWC,WAAWG,aAAaC,MAAMN,EAASO,YAAW,EAAMC,UAAS,EAAKC,cAAa,KAAWR,IAAWE,OAAOO,eAAeP,OAAOO,eAAeV,EAASC,GAAYD,EAASW,UAAUV,GAAv+DE,OAAOS,eAAe/B,EAAQ,cAAcyB,OAAM,GAAO,IAAIO,GAASV,OAAOW,QAAQ,SAASC,GAAQ,IAAI,GAAI5B,GAAE,EAAEA,EAAE6B,UAAU3B,OAAOF,IAAI,CAAC,GAAI8B,GAAOD,UAAU7B,EAAG,KAAI,GAAI+B,KAAOD,GAAWd,OAAOD,UAAUiB,eAAetB,KAAKoB,EAAOC,KAAMH,EAAOG,GAAKD,EAAOC,IAAQ,MAAOH,IAAaK,EAAa,WAAW,QAASC,GAAiBN,EAAOO,GAAO,IAAI,GAAInC,GAAE,EAAEA,EAAEmC,EAAMjC,OAAOF,IAAI,CAAC,GAAIoC,GAAWD,EAAMnC,EAAGoC,GAAWhB,WAAWgB,EAAWhB,aAAY,EAAMgB,EAAWd,cAAa,EAAQ,SAAUc,KAAWA,EAAWf,UAAS,GAAKL,OAAOS,eAAeG,EAAOQ,EAAWL,IAAIK,IAAc,MAAO,UAAS9B,EAAY+B,EAAWC,GAAuI,MAAvHD,IAAWH,EAAiB5B,EAAYS,UAAUsB,GAAeC,GAAYJ,EAAiB5B,EAAYgC,GAAoBhC,MCNrwBiC,EAAA5C,EAAA,GDM6zB6C,EAA6I,SAAgCC,GAAK,MAAOA,IAAKA,EAAIC,WAAWD,GAAKE,QAAQF,IAA3LF,GCL51BK,EAAAjD,EAAA,IACAkD,EAAAlD,EAAA,GACAmD,EAAAnD,EAAA,IAGMoD,EDA4/D,SAASC,GCEzgE,QAAAD,GAAYZ,GAAO/B,EAAA6C,KAAAF,EAAA,IAAAG,GAAA1C,EAAAyC,MAAAF,EAAAvB,WAAAR,OAAAmC,eAAAJ,IAAArC,KAAAuC,KACXd,GADW,OAAAe,GAkBnBE,UAAY,WACVF,EAAKG,UACHC,MAAO,QApBQJ,EAwBnBK,QAAU,SAACC,EAAIC,GACb,GAAIC,GAAY,8FAA8FC,KAAKH,GAC/GI,GAAeC,MAAMC,SAASL,EAAK,MAAQA,EAAO,CAEtD,OAAOC,IAAaE,GA5BHV,EAuCnBa,cAAgB,WACdb,EAAKc,UAAYd,EAAKc,SAASC,QAC/Bf,EAAKG,UACHa,QAAQ,EACRC,WA3CejB,EA+CnBkB,SAAW,SAACZ,GAEVN,EAAKc,UAAYd,EAAKc,SAASC,QAC/Bf,EAAKc,UAAW,EAAAnB,EAAAwB,SAAQ,aAAeb,GACrCc,OACEd,QAIJN,EAAKc,SAASO,GAAG,UAAW,WAC1BrB,EAAKG,UACHa,QAAQ,MAIZhB,EAAKc,SAASO,GAAG,cAAe,SAAAC,GAC9BtB,EAAKG,SAAS,SAAAoB,GAAA,OACZN,WACKK,GACHE,GAAIxB,EAAKwB,QAFXC,OAAA/E,EAGM6E,EAAMN,KAAKS,MAAM,EAAG,WAnEb1B,EAwEnB2B,QAAU,SAACC,GAET,GAAIrB,IAAO,EAAAb,EAAAmC,MAAKD,EAAGlD,OAAOT,MAEb,MAATsC,IACFA,EAAOK,SAASL,EAAK,IACrBA,EAAOI,MAAMJ,GAAQ,EAAIA,GAG3BP,EAAKG,UAAUI,UA9EfP,EAAKwB,GAAK,EACVxB,EAAKc,SAAW,KAEhBd,EAAKuB,OACHjB,GAAI,GACJC,KAAM,MACNS,QAAQ,EACRC,SAVejB,EDF0rM,MAAxrItC,GAAUmC,EAAWC,GAA0tCf,EAAac,IAAahB,IAAI,oBAAoBZ,MAAM,eAAiCY,IAAI,qBAAqBZ,MAAM,SCiCz2G6D,EAAWC,ODjCm5GlD,IAAI,uBAAuBZ,MAAM,WCsCh9G8B,KAAKe,UAAYf,KAAKe,SAASC,WDtC0/GlC,IAAI,SAASZ,MAAM,WCsFriH,GAAA+D,GAAAjC,KAAAkC,EAE+BlC,KAAKwB,MAAtCjB,EAFE2B,EAEF3B,GAAIC,EAFF0B,EAEE1B,KAAMH,EAFR6B,EAEQ7B,MAAOY,EAFfiB,EAEejB,OAAQC,EAFvBgB,EAEuBhB,IAE9B,OACE3B,GAAAG,QAAAyC,cAAA,QAAMC,UAAU,4BACb/B,EAEDd,EAAAG,QAAAyC,cAAA,OAAKC,UAAU,QACb7C,EAAAG,QAAAyC,cAAA,OAAKC,UAAU,aACb7C,EAAAG,QAAAyC,cAAA,MAAIC,UAAU,2BAA0B,EAAAvC,EAAAwC,IAAG,gBAC3C9C,EAAAG,QAAAyC,cAAA,KAAGC,UAAU,gBACV,EAAAvC,EAAAwC,IAAG,oBAEN9C,EAAAG,QAAAyC,cAAA,OAAKC,UAAU,eAAf,MAGA7C,EAAAG,QAAAyC,cAAA,SACEC,UAAU,2BACVE,KAAK,OACLC,YAAY,kBACZrE,MAAOqC,EACPiC,SAAU,SAAAX,GAAA,MAAMI,GAAK7B,UAAUG,GAAIsB,EAAGlD,OAAOT,WAAUqB,EAAAG,QAAAyC,cAAA,WACzD5C,EAAAG,QAAAyC,cAAA,OAAKC,UAAU,eAAf,QAGA7C,EAAAG,QAAAyC,cAAA,SACEC,UAAU,2BACVE,KAAK,OACLC,YAAY,QACZrE,MAAOsC,EACPgC,SAAUxC,KAAK4B,UACjBrC,EAAAG,QAAAyC,cAAA,OAAKC,UAAU,mBAEXnB,EACE1B,EAAAG,QAAAyC,cAAA,UAAQC,UAAU,iBACVK,QAAS,iBAAMR,GAAKnB,mBAAkB,EAAAjB,EAAAwC,IAAG,qBAEjD9C,EAAAG,QAAAyC,cAAA,UAAQC,UAAU,kBACVM,UAAW1C,KAAKM,QAAQC,EAAIC,GAC5BiC,QAAS,iBAAMR,GAAKd,SAASZ,EAAK,IAAMC,MAC7C,EAAAX,EAAAwC,IAAG,wBAObpB,GAA0B,IAAhBC,EAAKjE,QACdsC,EAAAG,QAAAyC,cAAA,OAAKC,UAAU,aACb7C,EAAAG,QAAAyC,cAAA,SAAOC,UAAU,gDACf7C,EAAAG,QAAAyC,cAAA,SAAOC,UAAU,cACjB7C,EAAAG,QAAAyC,cAAA,MAAIQ,MAAM,UACRpD,EAAAG,QAAAyC,cAAA,WAAK,EAAAtC,EAAAwC,IAAG,sBAGV9C,EAAAG,QAAAyC,cAAA,aACE5C,EAAAG,QAAAyC,cAAA,UACE5C,EAAAG,QAAAyC,cAAA,MAAIQ,MAAM,WAAU,EAAA9C,EAAAwC,IAAG,gBAOjCnB,EAAKjE,OAAS,GACZsC,EAAAG,QAAAyC,cAAA,OAAKC,UAAU,aACb7C,EAAAG,QAAAyC,cAAA,SAAOC,UAAU,gDACf7C,EAAAG,QAAAyC,cAAA,SAAOC,UAAU,cACjB7C,EAAAG,QAAAyC,cAAA,UACE5C,EAAAG,QAAAyC,cAAA,WAAK,EAAAtC,EAAAwC,IAAG,YACR9C,EAAAG,QAAAyC,cAAA,MAAIS,OAAQC,MAAO,OAAO,EAAAhD,EAAAwC,IAAG,qBAG/B9C,EAAAG,QAAAyC,cAAA,aAEEjB,EAAK4B,IAAI,SAAAC,GAAA,MACPxD,GAAAG,QAAAyC,cAAA,MAAIrD,IAAKiE,EAAItB,IACXlC,EAAAG,QAAAyC,cAAA,UAAKY,EAAIC,KACTzD,EAAAG,QAAAyC,cAAA,UAAKY,EAAIE,aAAT,kBDrKgsMnD,GAAaR,EAAO4D,UAAWzG,GAAQiD,QCkL9uMI","file":"static/js/NodeTester.5eb08d92.chunk.js","sourcesContent":["webpackJsonp([19],{\n\n/***/ 1097:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(18);var _api=__webpack_require__(7);var _i18n=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var NodeTester=function(_Component){_inherits(NodeTester,_Component);function NodeTester(props){_classCallCheck(this,NodeTester);var _this=_possibleConstructorReturn(this,(NodeTester.__proto__||Object.getPrototypeOf(NodeTester)).call(this,props));_this.hideModal=function(){_this.setState({modal:null});};_this.isValid=function(ip,port){var isValidIp=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ip);var isValidPort=!isNaN(parseInt(port,10))&&port>0;return isValidIp&&isValidPort;};_this.stopListening=function(){_this.listener&&_this.listener.close();_this.setState({active:false,logs:[]});};_this.testNode=function(ip){_this.listener&&_this.listener.close();_this.listener=(0,_api.channel)(\"/nodetest-\"+ip,{query:{ip:ip}});_this.listener.on(\"connect\",function(){_this.setState({active:true});});_this.listener.on(\"node-status\",function(status){_this.setState(function(state){return{logs:[_extends({},status,{id:_this.id++})].concat(_toConsumableArray(state.logs.slice(0,9)))};});});};_this.setPort=function(ev){var port=(0,_lodash.trim)(ev.target.value);if(port!==''){port=parseInt(port,10);port=isNaN(port)?0:port;}_this.setState({port:port});};_this.id=0;_this.listener=null;_this.state={ip:\"\",port:50051,active:false,logs:[]};return _this;}_createClass(NodeTester,[{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.listener&&this.listener.close();}},{key:\"render\",value:function render(){var _this2=this;var _state=this.state,ip=_state.ip,port=_state.port,modal=_state.modal,active=_state.active,logs=_state.logs;return _react2.default.createElement(\"main\",{className:\"container header-overlap\"},modal,_react2.default.createElement(\"div\",{className:\"card\"},_react2.default.createElement(\"div\",{className:\"card-body\"},_react2.default.createElement(\"h5\",{className:\"card-title text-center\"},(0,_i18n.tu)(\"node_tester\")),_react2.default.createElement(\"p\",{className:\"text-center\"},(0,_i18n.tu)(\"node_tester_msg\")),_react2.default.createElement(\"div\",{className:\"text-center\"},\"IP\"),_react2.default.createElement(\"input\",{className:\"form-control text-center\",type:\"text\",placeholder:\"123.123.123.123\",value:ip,onChange:function onChange(ev){return _this2.setState({ip:ev.target.value});}}),_react2.default.createElement(\"br\",null),_react2.default.createElement(\"div\",{className:\"text-center\"},\"Port\"),_react2.default.createElement(\"input\",{className:\"form-control text-center\",type:\"text\",placeholder:\"50051\",value:port,onChange:this.setPort}),_react2.default.createElement(\"div\",{className:\"text-center p-3\"},active?_react2.default.createElement(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return _this2.stopListening();}},(0,_i18n.tu)(\"node_tester_stop\")):_react2.default.createElement(\"button\",{className:\"btn btn-success\",disabled:!this.isValid(ip,port),onClick:function onClick(){return _this2.testNode(ip+\":\"+port);}},(0,_i18n.tu)(\"node_tester_test\"))))),active&&logs.length===0&&_react2.default.createElement(\"div\",{className:\"card mt-3\"},_react2.default.createElement(\"table\",{className:\"table table-hover table-striped bg-white m-0\"},_react2.default.createElement(\"thead\",{className:\"thead-dark\"},_react2.default.createElement(\"tr\",{align:\"center\"},_react2.default.createElement(\"th\",null,(0,_i18n.tu)(\"connection_node\")))),_react2.default.createElement(\"tbody\",null,_react2.default.createElement(\"tr\",null,_react2.default.createElement(\"td\",{align:\"center\"},(0,_i18n.tu)(\"loading\")))))),logs.length>0&&_react2.default.createElement(\"div\",{className:\"card mt-3\"},_react2.default.createElement(\"table\",{className:\"table table-hover table-striped bg-white m-0\"},_react2.default.createElement(\"thead\",{className:\"thead-dark\"},_react2.default.createElement(\"tr\",null,_react2.default.createElement(\"th\",null,(0,_i18n.tu)(\"message\")),_react2.default.createElement(\"th\",{style:{width:200}},(0,_i18n.tu)(\"node_tester_rt\")))),_react2.default.createElement(\"tbody\",null,logs.map(function(log){return _react2.default.createElement(\"tr\",{key:log.id},_react2.default.createElement(\"td\",null,log.msg),_react2.default.createElement(\"td\",null,log.responseTime,\" ms\"));})))));}}]);return NodeTester;}(_react.Component);exports.default=NodeTester;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/NodeTester.5eb08d92.chunk.js","import React, {Component} from 'react';\nimport {trim} from \"lodash\";\nimport {channel} from \"../../../services/api\";\nimport {tu} from \"../../../utils/i18n\";\n\n\nclass NodeTester extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.id = 0;\n    this.listener = null;\n\n    this.state = {\n      ip: \"\",\n      port: 50051,\n      active: false,\n      logs: [],\n    };\n  }\n\n  componentDidMount() {\n\n  }\n\n  hideModal = () => {\n    this.setState({\n      modal: null,\n    });\n  };\n\n  isValid = (ip, port) => {\n    let isValidIp = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ip);\n    let isValidPort = !isNaN(parseInt(port,10)) && port > 0;\n\n    return isValidIp && isValidPort;\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n\n  }\n\n  componentWillUnmount() {\n    this.listener && this.listener.close();\n  }\n\n  stopListening = () => {\n    this.listener && this.listener.close();\n    this.setState({\n      active: false,\n      logs: [],\n    });\n  };\n\n  testNode = (ip) => {\n\n    this.listener && this.listener.close();\n    this.listener = channel(\"/nodetest-\" + ip, {\n      query: {\n        ip,\n      }\n    });\n\n    this.listener.on(\"connect\", () => {\n      this.setState({\n        active: true,\n      });\n    });\n\n    this.listener.on(\"node-status\", status => {\n      this.setState(state => ({\n        logs: [{\n          ...status,\n          id: this.id++,\n        }, ...state.logs.slice(0, 9)],\n      }));\n    });\n  };\n\n  setPort = (ev) => {\n\n    let port = trim(ev.target.value);\n\n    if (port !== '') {\n      port = parseInt(port,10);\n      port = isNaN(port) ? 0 : port;\n    }\n\n    this.setState({port});\n  };\n\n  render() {\n\n    let {ip, port, modal, active, logs} = this.state;\n\n    return (\n      <main className=\"container header-overlap\">\n        {modal}\n\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <h5 className=\"card-title text-center\">{tu(\"node_tester\")}</h5>\n            <p className=\"text-center\">\n              {tu(\"node_tester_msg\")}\n            </p>\n            <div className=\"text-center\">\n              IP\n            </div>\n            <input\n              className=\"form-control text-center\"\n              type=\"text\"\n              placeholder=\"123.123.123.123\"\n              value={ip}\n              onChange={ev => this.setState({ip: ev.target.value})}/><br/>\n            <div className=\"text-center\">\n              Port\n            </div>\n            <input\n              className=\"form-control text-center\"\n              type=\"text\"\n              placeholder=\"50051\"\n              value={port}\n              onChange={this.setPort}/>\n            <div className=\"text-center p-3\">\n              {\n                active ?\n                  <button className=\"btn btn-danger\"\n                          onClick={() => this.stopListening()}>{tu(\"node_tester_stop\")}\n                  </button> :\n                  <button className=\"btn btn-success\"\n                          disabled={!this.isValid(ip, port)}\n                          onClick={() => this.testNode(ip + \":\" + port)}>\n                    {tu(\"node_tester_test\")}\n                  </button>\n              }\n            </div>\n          </div>\n        </div>\n        {\n          (active && logs.length === 0) &&\n            <div className=\"card mt-3\">\n              <table className=\"table table-hover table-striped bg-white m-0\">\n                <thead className=\"thead-dark\">\n                <tr align=\"center\">\n                  <th>{tu(\"connection_node\")}</th>\n                </tr>\n                </thead>\n                <tbody>\n                  <tr>\n                    <td align=\"center\">{tu(\"loading\")}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n        }\n        {\n          logs.length > 0 &&\n            <div className=\"card mt-3\">\n              <table className=\"table table-hover table-striped bg-white m-0\">\n                <thead className=\"thead-dark\">\n                <tr>\n                  <th>{tu(\"message\")}</th>\n                  <th style={{width: 200}}>{tu(\"node_tester_rt\")}</th>\n                </tr>\n                </thead>\n                <tbody>\n                {\n                  logs.map(log => (\n                    <tr key={log.id}>\n                      <td>{log.msg}</td>\n                      <td>{log.responseTime} ms</td>\n                    </tr>\n                  ))\n                }\n                </tbody>\n              </table>\n            </div>\n        }\n      </main>\n    );\n  }\n}\n\nexport default NodeTester;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/tools/NodeTester/index.js"],"sourceRoot":""}